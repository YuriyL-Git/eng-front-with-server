(this.webpackJsonpuntitled=this.webpackJsonpuntitled||[]).push([[0],{49:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(23),s=n.n(r),i=n(9),o=n(20),u=n(3),l=n(8),d=(n(49),function(){return Object(o.b)()}),p=o.c,j=n(17),b=Object(j.b)({name:"menu",initialState:{menuOnTopClass:"",menuActiveClass:"",selectedItemIndex:-1},reducers:{setMenuOnTop:function(e){e.menuOnTopClass="menu-on-top"},removeMenuFromTop:function(e){e.menuOnTopClass=""},setMenuActive:function(e){e.menuActiveClass="active"},removeMenuActive:function(e){e.menuActiveClass=""},setSelectedItemIndex:function(e,t){e.selectedItemIndex=t.payload}}}),f=b.actions,m=f.setMenuOnTop,g=f.removeMenuFromTop,h=f.removeMenuActive,O=f.setMenuActive,v=f.setSelectedItemIndex,x=b.reducer,w="https://english-for-kidz-lipcheyy.glitch.me/",_=n(0),y=function(){var e=d(),t=p((function(e){return e.app.cards}))[0],n=p((function(e){return e.menu.menuOnTopClass})),c=p((function(e){return e.menu.menuActiveClass})),a=p((function(e){return e.menu.selectedItemIndex})),r=p((function(e){return e.server.isAdminLoggedIn}));return Object(_.jsxs)("div",{className:"sidebar ".concat(n),children:[Object(_.jsxs)("div",{className:"menu-wrapper ".concat(c),children:[Object(_.jsx)("div",{className:"menu",children:Object(_.jsxs)("div",{className:"options",children:[Object(_.jsx)(i.b,{to:"/",className:"menu-link",children:Object(_.jsx)("div",{className:"option option--home ".concat(0===a?"selected":""),onClick:function(){e(h()),e(g())},onKeyDown:function(){},role:"button",tabIndex:0,"aria-label":"Menu",children:"Home page"},"main page")}),null===t||void 0===t?void 0:t.map((function(t,n){return Object(_.jsx)(i.b,{to:"/".concat(t.category.replace(/[\s()]/g,"").toLowerCase()),className:"menu-link",children:Object(_.jsxs)("div",{className:"option ".concat(a===n+1?"selected":""),onClick:function(){e(h()),e(g())},onKeyDown:function(){},role:"button",tabIndex:0,"aria-label":"Menu",children:[Object(_.jsx)("img",{className:"category-icon",src:"".concat(w,"/category-icon/").concat(t.image),alt:"icon"}),t.category]},t.category)},"".concat(t.category,"-link"))})),Object(_.jsx)(i.b,{to:"/statistic",className:"menu-link",children:Object(_.jsxs)("div",{className:"option option--statistic ".concat(a===(null===t||void 0===t?void 0:t.length)+2?"selected":""),onClick:function(){e(h()),e(g())},onKeyDown:function(){},role:"button",tabIndex:0,"aria-label":"Menu",children:[Object(_.jsx)("img",{className:"icon-statistic",src:"./icons/bar-chart.svg",alt:"icon"}),"Statistic"]},"statistic")}),Object(_.jsx)(i.b,{to:"".concat(r?"/logout":"/login"),className:"menu-link",children:Object(_.jsx)("div",{className:"option ".concat(a===(null===t||void 0===t?void 0:t.length)+3?"selected":""),children:"".concat(r?"Logout":"Login")})})]})}),Object(_.jsx)("div",{className:"round-corners"}),Object(_.jsx)("svg",{className:"x",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 220 400",height:"400",width:"220",children:Object(_.jsxs)("g",{className:"top-bars",strokeWidth:"8",fill:"orange",children:[Object(_.jsx)("path",{className:"bar-top bar-top--x",d:"M 152,17 H 202",fill:"none",strokeLinecap:"round"}),Object(_.jsx)("path",{className:"bar-bottom bar-bottom--x",strokeLinecap:"round",d:"M 152,32 H 202"})]})})]}),Object(_.jsx)("div",{role:"button","aria-label":"Menu",className:"menu-click-area",onClick:function(t){t.stopPropagation(),0===c.length?e(O()):(e(h()),e(g()))},onMouseLeave:function(){c||e(g())},tabIndex:0,onKeyDown:function(){}})]})},N=(n(54),n(55),n(56),function(e){var t=e.category,n=e.image;return Object(_.jsx)(i.b,{to:"".concat(t.replace(/[\s()]/g,"").toLowerCase()),className:"card__link",children:Object(_.jsxs)("div",{className:"card__wrapper",children:[Object(_.jsx)("img",{className:"card__image",src:"".concat(n),alt:"".concat(t)}),Object(_.jsx)("div",{className:"card__title-wrapper",children:Object(_.jsx)("p",{className:"card__title",children:"".concat(t)})})]})},"".concat(t,"-link"))}),C=function(){var e=p((function(e){return e.app.cards})),t=e[0];return Object(_.jsxs)("section",{children:[Object(_.jsx)("div",{className:"categories-title",children:"Categories:"}),Object(_.jsx)("div",{className:"cards-field",children:null===t||void 0===t?void 0:t.map((function(t,n){return e[n+1][0]?Object(_.jsx)(N,{category:"".concat(t.category),image:"".concat(w,"/").concat(e[n+1][0].image)},"".concat(t.category)):""}))})]})},S=(n(57),function(e){new Audio("".concat(w,"/").concat(e)).play().then()}),k=n(39),I=function(e,t){var n=t[0];return null===n||void 0===n?void 0:n.findIndex((function(t){return t.category.replace(/[\s()]/g,"").toLowerCase()===e}))},M=function(e){var t=JSON.parse(localStorage.getItem("statistic"));if(t)return t;for(var n=[],c=e[0],a=1;a<e.length;a++)for(var r=0;r<e[a].length;r++){var s=e[a][r],i={word:s.word,translation:s.translation,category:c[a-1].category,errorsCount:0,successCount:0,successRate:-1,trainingClicks:0};n.push(i)}return n},L=function(e){return function(t,n){return t[e]>n[e]?1:t[e]<n[e]?-1:0}},T=function(e){return function(t,n){return t[e]<n[e]?1:t[e]>n[e]?-1:0}},A=function(e,t,n){for(var c=1;c<e.length;c++)for(var a=0;a<e[c].length;a++){var r=e[c][a];if(r.word===t&&r.translation===n)return r}return null},R=Object(j.b)({name:"app",initialState:{playMode:!1,gameIsStarted:!1,currentCategory:"",gameSequence:[],statistic:[],repeatWordsList:[],currentGameAttempts:[],showSuccessMessage:!1,showFailMessage:!1,categoryToSortByIndex:-1,sortedUp:!0,timerIsStarted:!1,timerShowMessage:null,btnBlink:"",cards:[],hostMessage:!1},reducers:{toggleTrainMode:function(e){e.playMode=!e.playMode,e.playMode||(e.gameIsStarted=!1),e.currentGameAttempts=[]},startGame:function(e){e.gameIsStarted=!0,e.currentGameAttempts=[]},stopGame:function(e){e.gameIsStarted=!1,e.currentGameAttempts=[],e.showSuccessMessage&&(e.showSuccessMessage=!1),e.showFailMessage&&(e.showFailMessage=!1)},setCurrentCategory:function(e,t){e.currentCategory=t.payload},setCardsList:function(e,t){e.cards=t.payload},createGameSequence:function(e){var t=I(e.currentCategory,e.cards),n=e.cards[t+1];"repeat-words"===e.currentCategory&&(n=e.repeatWordsList),e.gameSequence=n.slice().sort((function(){return.5-Math.random()})),e.gameSequence.length>0&&S(e.gameSequence[e.gameSequence.length-1].audioSrc)},cardClickedInPlayMode:function(e,t){if(0!==e.gameSequence.length){var n=e.statistic.findIndex((function(e){return e.word===t.payload})),c=function(t){return Math.floor(e.statistic[t].successCount/(e.statistic[t].successCount+e.statistic[t].errorsCount)*100)};if(e.gameSequence[e.gameSequence.length-1].word===t.payload){S("signals/success.mp3"),e.statistic[n].successCount++,e.statistic[n].successRate=c(n),e.currentGameAttempts.push(!0),e.gameSequence.splice(-1);var a=JSON.stringify(e.statistic);if(localStorage.setItem("statistic",a),e.gameSequence.length>0)S(e.gameSequence[e.gameSequence.length-1].audioSrc);else{if(e.currentGameAttempts.filter((function(e){return!1===e})).length>0)return S("signals/game-fail.mp3"),void(e.showFailMessage=!0);S("signals/game-success.ogg"),e.showSuccessMessage=!0}}else{S("signals/fail.wav"),e.currentGameAttempts.push(!1);var r=e.gameSequence[e.gameSequence.length-1].word,s=e.statistic.findIndex((function(e){return e.word===r}));e.statistic[s].errorsCount++,e.statistic[s].successRate=c(s);var i=JSON.stringify(e.statistic);localStorage.setItem("statistic",i)}}},cardClickedInTrainMode:function(e,t){var n=e.statistic.findIndex((function(e){return e.word===t.payload}));e.statistic[n]&&e.statistic[n].trainingClicks++;var c=JSON.stringify(e.statistic);localStorage.setItem("statistic",c)},sortByProperty:function(e,t){if(e.categoryToSortByIndex===t.payload.index)return e.sortedUp=!e.sortedUp,e.sortedUp&&e.statistic.sort(L(t.payload.category)),void(e.sortedUp||e.statistic.sort(T(t.payload.category)));e.categoryToSortByIndex=t.payload.index,"string"===typeof e.statistic[0][t.payload.category]?(e.statistic.sort(L(t.payload.category)),e.sortedUp=!0):(e.statistic.sort(T(t.payload.category)),e.sortedUp=!1)},setStatistic:function(e){e.statistic=M(e.cards)},resetStatistic:function(e){localStorage.removeItem("statistic"),e.statistic=M(e.cards),e.categoryToSortByIndex=-1},setTimerIsStarted:function(e,t){e.timerIsStarted=t.payload},setTimer:function(e,t){e.timerShowMessage=t.payload},stopTimer:function(e){e.timerShowMessage&&(clearTimeout(e.timerShowMessage),e.timerIsStarted=!1)},setDifficultWordsArray:function(e){var t=Object(k.a)(e.statistic).filter((function(e){return-1!==e.successRate&&100!==e.successRate})).sort(L("successRate")).slice(0,8).map((function(t){return A(e.cards,t.word,t.translation)}));e.repeatWordsList=t},setBtnBlink:function(e){e.btnBlink="blink-effect"},removeBtnBlink:function(e){e.btnBlink=""},setHostMessage:function(e){e.hostMessage=!0}}}),B=R.actions,D=B.toggleTrainMode,E=B.startGame,q=B.stopGame,F=B.setCurrentCategory,G=B.createGameSequence,U=B.cardClickedInPlayMode,K=B.cardClickedInTrainMode,P=B.resetStatistic,W=B.sortByProperty,J=B.setDifficultWordsArray,H=B.setTimerIsStarted,z=B.setTimer,Y=B.stopTimer,Q=B.setBtnBlink,V=B.removeBtnBlink,X=B.setCardsList,Z=B.setStatistic,$=B.setHostMessage,ee=R.reducer,te=function(e){var t=e.word,n=e.image,a=e.translation,r=e.audioSrc,s=d(),i=Object(c.useState)(""),o=Object(u.a)(i,2),l=o[0],j=o[1],b=Object(c.useState)(""),f=Object(u.a)(b,2),m=f[0],g=f[1],h=p((function(e){return e.app.playMode})),O=p((function(e){return e.app.gameIsStarted})),v=p((function(e){return e.app.gameSequence}));Object(c.useEffect)((function(){return function(){g("")}}),[h]);return Object(_.jsx)("div",{className:"train-card__wrapper",onMouseLeave:function(){j("")},role:"button",onClick:function(){if(!(m.length>0))if(h){if(!O)return s(Q()),void setTimeout((function(){s(V())}),1e3);s(U(t)),v[v.length-1].word===t&&g("card-inactive")}else{if(l.length>0)return;S(r),s(K(t))}},onKeyDown:function(){},children:Object(_.jsxs)("div",{className:"train-card ".concat(l),children:[Object(_.jsxs)("div",{className:"train-card__front-side ".concat(m),children:[Object(_.jsx)("img",{className:"train-card__image ".concat(h?"image-play":""),src:"".concat(w,"/").concat(n),alt:"".concat(n)}),Object(_.jsxs)("div",{className:"train-card__title-wrapper ".concat(h?"hidden":""),children:[Object(_.jsx)("p",{className:"train-card__title",children:"".concat(t)}),Object(_.jsx)("button",{className:"train-card__btn",type:"button",onClick:function(e){e.stopPropagation(),j("train-card__card-on-back")},onKeyDown:function(){},children:Object(_.jsx)("img",{className:"train-card__icon-rotate",src:"".concat(w,"/category-icon/circular-arrows.svg"),alt:"icon-rotate"})})]})]}),Object(_.jsxs)("div",{className:"train-card__back-side",children:[Object(_.jsx)("img",{className:"train-card__image",src:"".concat(w,"/").concat(n),alt:"".concat(n)}),Object(_.jsx)("div",{className:"train-card__title-wrapper",children:Object(_.jsx)("p",{className:"train-card__title",children:"".concat(a)})})]})]})})},ne=(n(58),n(59),function(){var e=d(),t=p((function(e){return e.app.playMode})),n=p((function(e){return e.app.gameIsStarted})),c=p((function(e){return e.app.gameSequence})),a=p((function(e){return e.app.btnBlink}));return Object(_.jsxs)("div",{className:"switch-wrapper",children:[Object(_.jsxs)("button",{type:"button",className:"btn-start-game ".concat(a," ").concat(t?"":"btn-hidden"," ").concat(n?"btn-repeat":""),onClick:function(){n?c.length>0&&S(c[c.length-1].audioSrc):(e(G()),e(E()))},children:[n?"":"START GAME",Object(_.jsx)("img",{src:"./icons/repeat.svg",alt:"icon-repeat",className:"icon-repeat ".concat(n?"":"hidden")})]}),Object(_.jsxs)("div",{className:"onoffswitch",children:[Object(_.jsx)("input",{type:"checkbox",name:"onoffswitch",className:"onoffswitch-checkbox",id:"myonoffswitch",tabIndex:0,defaultChecked:t,onClick:function(){e(D())}}),Object(_.jsxs)("label",{className:"onoffswitch-label",htmlFor:"myonoffswitch",children:[Object(_.jsx)("span",{className:"onoffswitch-inner"}),Object(_.jsx)("span",{className:"onoffswitch-switch"})]})]})]})}),ce=(n(60),function(){var e=d(),t=Object(l.g)(),n=p((function(e){return e.app.showSuccessMessage})),a=p((function(e){return e.app.timerIsStarted}));Object(c.useEffect)((function(){if(n&&!a){var c=setTimeout((function(){t.push("/")}),5e3);e(H(!0)),e(z(c))}}),[n]);return Object(_.jsxs)("div",{onClick:function(){e(q()),t.push("/")},className:"message-success__wrapper ".concat(n?"":"hidden"),role:"button",tabIndex:0,onKeyDown:function(){},children:[Object(_.jsx)("div",{className:"message-success__title",children:"Success !!!"}),Object(_.jsx)("img",{className:"message-success__image",src:"./images/success.png",alt:"icon success"})]})}),ae=(n(61),function(){var e=d(),t=Object(l.g)(),n=p((function(e){return e.app.showFailMessage})),a=p((function(e){return e.app.timerIsStarted})),r=p((function(e){return e.app.currentGameAttempts})).filter((function(e){return!1===e})).length;Object(c.useEffect)((function(){if(n&&!a){var c=setTimeout((function(){t.push("/")}),5e3);e(H(!0)),e(z(c))}}),[n]);return Object(_.jsxs)("div",{onClick:function(){e(q()),t.push("/")},className:"message-fail__wrapper ".concat(n?"":"hidden"),role:"button",tabIndex:0,onKeyDown:function(){},children:[Object(_.jsx)("div",{className:"message-fail__title",children:"Fail"}),Object(_.jsxs)("div",{className:"message-fail__error",children:["You made ",r," mistakes"]}),Object(_.jsx)("img",{className:"message-fail__image",src:"./images/fail.png",alt:"icon fail"})]})}),re=function(e){var t=e.path,n=p((function(e){return e.app.cards})),c=n[0],a=p((function(e){return e.app.currentGameAttempts})),r=p((function(e){return e.app.showFailMessage})),s=p((function(e){return e.app.showSuccessMessage})),i=p((function(e){return e.app.repeatWordsList})),o=n[c.findIndex((function(e){return e.category.replace(/[\s()]/g,"").toLowerCase()===t}))+1];return"repeat-words"===t&&(o=i),Object(_.jsxs)("div",{className:"train-page",children:[Object(_.jsx)(ne,{}),Object(_.jsx)(ce,{}),Object(_.jsx)(ae,{}),Object(_.jsxs)("div",{className:"cards-field__wrapper ".concat(r||s?"hidden":""),children:[Object(_.jsx)("div",{className:"stars-section",children:a.map((function(e,t){return Object(_.jsx)("img",{className:"star-icon",src:"./icons/star-".concat(e?"green":"red",".svg"),alt:"star-icon"},t)}))}),Object(_.jsx)("div",{className:"no-cards-title ".concat(o.length>0?"hidden":""),children:"There are no words yet"}),Object(_.jsx)("div",{className:"cards-field cards-field--train",children:o.map((function(e){return Object(_.jsx)(te,{word:e.word,translation:e.translation,image:e.image,audioSrc:e.audioSrc},e.word)}))})]})]})},se=n(2),ie=n.n(se),oe=n(7),ue=n(6),le=n.n(ue),de=function(){var e=Object(oe.a)(ie.a.mark((function e(){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.a.get("".concat(w,"/logout"),{withCredentials:!0});case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),pe=Object(j.b)({name:"server",initialState:{isAdminLoggedIn:!1,user:""},reducers:{loginAdmin:function(e){e.isAdminLoggedIn=!0,e.user="Admin"},logoutAdmin:function(e){e.isAdminLoggedIn=!1,de().then()}}}),je=pe.reducer,be=pe.actions,fe=be.loginAdmin,me=be.logoutAdmin;n(80),n(81);var ge=function(e){var t=e.word,n=e.successCount,c=e.errorsCount,a=e.successRate,r=e.trainingClicks,s=e.translation,i=e.category,o=n+c;return Object(_.jsxs)("div",{className:"table-row",children:[Object(_.jsx)("div",{className:"table__row-content",children:t}),Object(_.jsx)("div",{className:"table__row-content",children:s}),Object(_.jsx)("div",{className:"table__row-content",children:i}),Object(_.jsx)("div",{className:"table__row-content",children:r}),Object(_.jsx)("div",{className:"table__row-content",children:n}),Object(_.jsx)("div",{className:"table__row-content",children:c}),Object(_.jsx)("div",{className:"table__row-content",children:o>0?"".concat(a,"%"):"-"})]})},he=[{title:"Word",property:"word"},{title:"Translation",property:"translation"},{title:"Category",property:"category"},{title:"Train clicks",property:"trainingClicks"},{title:"Correct answers",property:"successCount"},{title:"Error answers",property:"errorsCount"},{title:"Correct answers %",property:"successRate"}],Oe=function(){var e=d(),t=p((function(e){return e.app.statistic})),n=p((function(e){return e.app.sortedUp})),c=p((function(e){return e.app.categoryToSortByIndex}));return Object(_.jsxs)("div",{className:"statistic",children:[Object(_.jsxs)("div",{className:"statistic__btn-wrapper",children:[Object(_.jsx)(i.b,{to:"repeat-words",className:"repeat-link",children:Object(_.jsx)("button",{type:"button",className:"statistic__btn",children:"Repeat difficult words"})}),Object(_.jsxs)("button",{type:"button",className:"statistic__btn btn-reset",onClick:function(){e(P())},children:[Object(_.jsx)("img",{className:"statistic__icon-reset",src:"./icons/reset.svg",alt:"icon reset"}),"Reset"]})]}),Object(_.jsxs)("div",{className:"statistic__table",children:[Object(_.jsx)("div",{className:"statistic__table-header",children:he.map((function(t,a){return Object(_.jsx)("button",{className:"statistic__category-btn",type:"button",onClick:function(){e(W({category:t.property,index:a}))},children:Object(_.jsxs)("div",{className:"statistic__btn-content",children:[t.title,Object(_.jsx)("img",{className:"statistic__icon-arrow ".concat(c===a?"":"hidden"," ").concat(n?"":"icon-down"),src:"./icons/arrow.svg",alt:"icon arrow"})]})},t.title)}))}),t.map((function(e,t){return Object(_.jsx)(ge,{word:e.word,translation:e.translation,category:e.category,trainingClicks:e.trainingClicks,errorsCount:e.errorsCount,successCount:e.successCount,successRate:e.successRate},e.word+t)}))]})]})},ve=(n(82),function(){var e=Object(oe.a)(ie.a.mark((function e(t,n){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.a.post("".concat(w,"/login"),{username:t,password:n},{withCredentials:!0});case 3:return c=e.sent,e.abrupt("return","success"===c.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()),xe=function(){var e=Object(l.g)(),t=d(),n=Object(c.useState)(""),a=Object(u.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(""),o=Object(u.a)(i,2),p=o[0],j=o[1],b=Object(c.useState)(""),f=Object(u.a)(b,2),m=f[0],g=f[1];return Object(_.jsxs)("div",{className:"login-form",children:[Object(_.jsx)("div",{className:"login-form__title",children:"Login"}),Object(_.jsx)("input",{type:"text",className:"login-form__input",placeholder:"login",onChange:function(e){return s(e.target.value)}}),Object(_.jsx)("input",{type:"password",className:"login-form__input",placeholder:"password",onChange:function(e){return j(e.target.value)}}),Object(_.jsx)("div",{className:"login-form__wrong-login-msg",children:m}),Object(_.jsxs)("div",{className:"login-form__btn-wrapper",children:[Object(_.jsx)("button",{className:"login-form__btn",type:"button",onClick:function(){ve(r,p).then((function(n){n||g("Incorrect login or password!"),n&&(g(""),t(fe()),e.push("/"))}))},children:"Login"}),Object(_.jsx)("button",{className:"login-form__btn btn-red",type:"button",onClick:function(){e.goBack()},children:"Cancel"})]})]})},we=(n(83),function(){var e=Object(oe.a)(ie.a.mark((function e(t){var n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.post("".concat(w,"/reset-db"),{reset:"resetDb",user:t},{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_e=function(){var e=Object(oe.a)(ie.a.mark((function e(){var t,n,c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=le.a.CancelToken.source(),n=setTimeout((function(){t.cancel()}),2500),e.prev=2,e.next=5,le.a.get("".concat(w,"/cards-data"),{cancelToken:t.token});case 5:return c=e.sent,clearTimeout(n),e.abrupt("return",c.data);case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=d(),t=p((function(e){return e.server.user}));return Object(_.jsxs)("div",{className:"admin-panel",children:[Object(_.jsxs)("div",{className:"admin-panel__links-wrapper",children:[Object(_.jsx)(i.b,{to:"/categories",className:"admin-panel__link link-category",children:Object(_.jsx)("div",{className:"admin-panel__link-title",children:"Categories"})}),Object(_.jsx)("button",{className:"admin-panel__link btn-reset-db",type:"button",onClick:function(){we(t).then((function(){_e().then((function(t){e(X(t)),e(P())}))}))},children:"Reset database"})]}),Object(_.jsx)(i.b,{to:"/logout",className:"admin-panel__link link-logout",children:Object(_.jsx)("div",{children:"Logout"})})]})},Ne=function(){var e=Object(oe.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.a.get("".concat(w,"/user"),{withCredentials:!0});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","user_not_found");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Ce=n(15),Se=n(16),ke=(n(86),n(87),function(){var e=Object(oe.a)(ie.a.mark((function e(t){var n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.put("".concat(w,"/update-icon-category"),t,{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ie=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,c){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.put("".concat(w,"/update-category-name"),{oldCategoryName:t,newCategoryName:n,user:c},{withCredentials:!0});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),Me=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.post("".concat(w,"/remove-category"),{category:t,user:n},{withCredentials:!0});case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Le=function(e){var t=e.category,n=e.image,a=d(),r=p((function(e){return e.server.user})),s=Object(c.useState)(!1),i=Object(u.a)(s,2),o=i[0],j=i[1],b=Object(c.useState)(!1),f=Object(u.a)(b,2),m=f[0],g=f[1],h=Object(c.useState)(t),O=Object(u.a)(h,2),v=O[0],x=O[1],y=Object(c.useState)(""),N=Object(u.a)(y,2),C=N[0],S=N[1],k=Object(c.useRef)(null),I=Object(l.g)(),M=function(){_e().then((function(e){a(X(e)),a(P())}))};return Object(_.jsxs)("div",{className:"category-edit",children:[Object(_.jsx)("input",{className:"hidden",type:"file",accept:".svg, .ico, .png",onChange:function(e){if(e.target.files){if(!e.target.files)return;var n=e.target.files[0],c=e.target.files[0].name,a=new FormData;a.append("file",n),a.append("fileName",c),a.append("category",t),a.append("user",r),ke(a).then((function(){M()}))}},ref:k}),Object(_.jsx)("div",{className:"category-edit__remove-icon-wrapper",children:Object(_.jsx)(Ce.a,{className:"category-edit__remove-icon",icon:Se.b,onClick:function(){m||(j(!0),S("Remove category?"))}})}),Object(_.jsxs)("div",{className:"category-edit__title-wrapper",children:[Object(_.jsx)("div",{className:"category-edit__title ".concat(m?"hidden":""),children:t}),Object(_.jsx)("input",{className:"category-edit__title-input ".concat(m?"":"hidden"),type:"text",placeholder:"category",value:v,onChange:function(e){x(e.target.value)}})]}),Object(_.jsxs)("div",{className:"category-edit__icon-wrapper",role:"button",onClick:function(){(k.current||{click:function(){}}).click()},children:[Object(_.jsx)("div",{className:"category-edit__icon-title",children:"Icon:"}),Object(_.jsx)("img",{className:"category-edit__icon",src:"".concat(w,"/category-icon/").concat(n),alt:"icon"})]}),Object(_.jsxs)("div",{className:"category-edit__btn-wrapper",children:[Object(_.jsx)("button",{className:"category-edit__btn ".concat(m||o?"btn-red":""),type:"button",onClick:function(){if(m||o)return g(!1),j(!1),void S("");g(!0),S("Update category name?"),x(t)},children:m||o?"CANCEL":"Edit name"}),Object(_.jsx)("button",{className:"category-edit__btn ".concat(m||o?"btn-green":""),type:"button",onClick:function(){if(o||m)o&&(Me(t,r).then((function(){M()})),j(!1)),m&&v.length>0&&Ie(t,v,r).then((function(){M()})),S(""),g(!1),j(!1),x(t);else{var e="/".concat(t.replace(/[\s()]/g,"").toLowerCase(),"/words");I.push(e)}},children:m||o?"OK":"Edit words"})]}),Object(_.jsx)("div",{className:"category-edit__msg",children:C})]})},Te=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.post("".concat(w,"/add-category"),t,{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=p((function(e){return e.app.cards})),t=p((function(e){return e.server.user})),n=e[0],a=d(),r=Object(c.useState)(!1),s=Object(u.a)(r,2),i=s[0],o=s[1],l=Object(c.useState)(""),j=Object(u.a)(l,2),b=j[0],f=j[1],m=Object(c.useState)(""),g=Object(u.a)(m,2),h=g[0],O=g[1],v=Object(c.useState)(""),x=Object(u.a)(v,2),w=x[0],y=x[1],N=Object(c.useState)(null),C=Object(u.a)(N,2),S=C[0],k=C[1],I=Object(c.useRef)(null);return Object(_.jsxs)("div",{className:"edit-category-page",children:[Object(_.jsx)("div",{className:"edit-category-page__title",children:"Edit categories"}),Object(_.jsxs)("div",{className:"cards-field",children:[Object(_.jsxs)("div",{className:"add-new-category ".concat(i?"card-edit":""),children:[Object(_.jsx)("input",{className:"hidden",type:"file",accept:".svg, .ico, .png",onChange:function(e){if(e.target.files){if(!e.target.files)return;var n=e.target.files[0];if(!n)return;var c=new FileReader;c.onload=function(e){var t=document.createElement("img");e.target&&f(e.target.result),document.body.appendChild(t)},c.readAsDataURL(n);var a=e.target.files[0].name,r=new FormData;r.append("file",n),r.append("fileName",a),r.append("user",t),k(r)}},ref:I}),Object(_.jsx)("input",{type:"text",className:"add-new-category__input ".concat(i?"":"hidden"),placeholder:"category name",onChange:function(e){O(e.target.value)},value:h}),Object(_.jsxs)("div",{className:"add-new-category__icon-wrapper ".concat(i?"":"hidden"),role:"button",onClick:function(){(I.current||{click:function(){}}).click()},children:[Object(_.jsx)("div",{className:"category-edit__icon-title",children:"Icon:"}),Object(_.jsx)("img",{className:"add-new-category__icon ".concat(b?"":"hidden"),src:b,alt:"img"})]}),Object(_.jsx)(Ce.a,{className:"add-new-category__plus-icon ".concat(i?"hidden":""),icon:Se.a,onClick:function(){o(!0),y("Create new category?")}}),Object(_.jsxs)("div",{className:"category-edit__btn-wrapper ".concat(i?"":"hidden"),children:[Object(_.jsx)("button",{className:"category-edit__btn btn-red",type:"button",onClick:function(){o(!1),O(""),f(""),y("")},children:"CANCEL"}),Object(_.jsx)("button",{className:"category-edit__btn  btn-green",type:"button",onClick:function(){0!==h.length?S?n.findIndex((function(e){return e.category===h}))>-1?y("Category already exists!"):(S.append("category",h),Te(S).then((function(){_e().then((function(e){a(X(e)),setTimeout((function(){a(P())}),3e3)}))})),o(!1),O(""),f(""),y("")):y("Set category icon!"):y("Enter category name")},children:"OK"})]}),Object(_.jsx)("div",{className:"category-edit__msg",children:w})]}),null===n||void 0===n?void 0:n.map((function(e,t){return Object(_.jsx)(Le,{category:e.category,image:e.image},e.category)}))]})]})},Re=(n(88),n(89),function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,c){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.post("".concat(w,"/remove-word"),{word:t,translation:n,user:c},{withCredentials:!0});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()),Be=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.put("".concat(w,"/update-word-files"),t,{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,c,a){var r;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.put("".concat(w,"/update-word"),{origWord:t,origTranslation:n,card:c,user:a},{withCredentials:!0});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n,c,a){return e.apply(this,arguments)}}(),Ee=function(e){var t=e.word,n=e.image,a=e.translation,r=e.audioSrc,s=d(),i=p((function(e){return e.server.user})),o=Object(c.useState)(!1),l=Object(u.a)(o,2),j=l[0],b=l[1],f=Object(c.useState)(!1),m=Object(u.a)(f,2),g=m[0],h=m[1],O=Object(c.useState)(t),v=Object(u.a)(O,2),x=v[0],y=v[1],N=Object(c.useState)(a),C=Object(u.a)(N,2),k=C[0],I=C[1],M=Object(c.useState)("".concat(w,"/").concat(n)),L=Object(u.a)(M,2),T=L[0],A=L[1],R=Object(c.useState)(n),B=Object(u.a)(R,2),D=B[0],E=B[1],q=Object(c.useState)(r.split("/").pop()),F=Object(u.a)(q,2),G=F[0],U=F[1],K=Object(c.useRef)(null),W=Object(c.useRef)(null),J=Object(c.useState)(new FormData),H=Object(u.a)(J,2),z=H[0],Y=H[1],Q=function(){_e().then((function(e){s(X(e)),s(P())}))};return Object(_.jsxs)("div",{className:"word-edit",children:[Object(_.jsx)("input",{className:"hidden",type:"file",accept:".svg, .png, .jpg, .jpeg",onChange:function(e){if(e.target.files){if(!e.target.files)return;var t=e.target.files[0],n=e.target.files[0].name;z.append("fileImg",t),z.append("imgName",n),A(URL.createObjectURL(t)),E("img/".concat(n))}},ref:K}),Object(_.jsx)("input",{className:"hidden",type:"file",accept:".mp3, .wav",onChange:function(e){if(e.target.files){if(!e.target.files)return;var t=e.target.files[0],n=e.target.files[0].name;z.append("fileSound",t),z.append("soundName",n),U(n)}},ref:W}),Object(_.jsx)("div",{className:"word-edit__remove-icon-wrapper ".concat(j?"wrapper-edit":""),children:Object(_.jsx)(Ce.a,{className:"word-edit__remove-icon",icon:Se.b,onClick:function(){j||h(!0)}})}),Object(_.jsx)("div",{className:"word-edit__input-wrapper ".concat(j?"":"hidden"),children:Object(_.jsx)("input",{className:"word-edit__input",placeholder:"word",onChange:function(e){y(e.target.value)},value:x})}),Object(_.jsx)("div",{className:"word-edit__input-wrapper ".concat(j?"":"hidden"),children:Object(_.jsx)("input",{className:"word-edit__input",placeholder:"translation",onChange:function(e){I(e.target.value)},value:k})}),Object(_.jsxs)("div",{className:"word-edit__word ".concat(j?"hidden":""),children:[Object(_.jsx)("strong",{children:"Word: "}),t]}),Object(_.jsxs)("div",{className:"word-edit__translation ".concat(j?"hidden":""),children:[Object(_.jsx)("strong",{children:"Translation: "}),a]}),Object(_.jsxs)("div",{className:"word-edit__sound",onClick:function(){j?(W.current||{click:function(){}}).click():S(r)},role:"button",children:[Object(_.jsx)("strong",{children:"Sound: "}),G]}),Object(_.jsxs)("div",{className:"word-edit__img-wrapper",children:[Object(_.jsx)("strong",{children:"Image: "}),Object(_.jsx)("img",{className:"word-edit__img ".concat(j?"img-active":""),src:"".concat(T),alt:"img",onClick:function(){j&&(K.current||{click:function(){}}).click()}})]}),Object(_.jsxs)("div",{className:"word-edit__btn-wrapper",children:[Object(_.jsx)("button",{className:"category-edit__btn ".concat(j||g?"hidden":""),type:"button",onClick:function(){b(!0)},children:"Edit card"}),Object(_.jsx)("button",{className:"category-edit__btn edit-word-btn ".concat(j||g?"btn-red":"hidden"),type:"button",onClick:function(){h(!1),b(!1),I(a),y(t),A("".concat(w,"/").concat(n)),U(r.split("/").pop())},children:"CANCEL"}),Object(_.jsx)("button",{className:"category-edit__btn edit-word-btn ".concat(j||g?"btn-green":"hidden"),type:"button",onClick:function(){if(g&&Re(t,a,i).then((function(){Q()})),x||y(t),k||I(a),j){Be(z).then((function(){Q(),Y(new FormData)}));var e={word:x,image:D,translation:k,audioSrc:"audio/".concat(G)};De(t,a,e,i).then((function(){Q()})),b(!1)}},children:"OK"})]})]})},qe=(n(90),function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,c){var a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.a.post("".concat(w,"/add-word"),{category:t,card:n,user:c},{withCredentials:!0});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()),Fe=function(e){var t=e.category,n=d(),a=p((function(e){return e.server.user})),r=Object(c.useState)(!1),s=Object(u.a)(r,2),i=s[0],o=s[1],l=Object(c.useState)(""),j=Object(u.a)(l,2),b=j[0],f=j[1],m=Object(c.useRef)(null),g=Object(c.useRef)(null),h=Object(c.useState)(""),O=Object(u.a)(h,2),v=O[0],x=O[1],w=Object(c.useState)(""),y=Object(u.a)(w,2),N=y[0],C=y[1],S=Object(c.useState)(""),k=Object(u.a)(S,2),I=k[0],M=k[1],L=Object(c.useState)(""),T=Object(u.a)(L,2),A=T[0],R=T[1],B=Object(c.useState)(""),D=Object(u.a)(B,2),E=D[0],q=D[1],F=Object(c.useState)(new FormData),G=Object(u.a)(F,2),U=G[0],K=G[1],W=function(){o(!1),R(""),q(""),x(""),C(""),M(""),K(new FormData),f("")};return Object(_.jsxs)("div",{className:"add-new-word ".concat(i?"word-edit":""),children:[Object(_.jsx)("input",{className:"hidden",type:"file",accept:".svg, .png, .jpg, .jpeg",onChange:function(e){if(e.target.files){if(!e.target.files)return;var t=e.target.files[0],n=e.target.files[0].name;U.append("fileImg",t),U.append("imgName",n),C(URL.createObjectURL(t)),x("img/".concat(n))}},ref:m}),Object(_.jsx)("input",{className:"hidden",type:"file",accept:".mp3, .wav",onChange:function(e){if(e.target.files){if(!e.target.files)return;var t=e.target.files[0],n=e.target.files[0].name;U.append("fileSound",t),U.append("soundName",n),M(n)}},ref:g}),Object(_.jsxs)("div",{className:"add-new-word__edit-wrapper ".concat(i?"":"hidden"),children:[Object(_.jsx)("div",{className:"word-edit__input-wrapper ".concat(i?"":"hidden"),children:Object(_.jsx)("input",{className:"word-edit__input",placeholder:"word",onChange:function(e){R(e.target.value)},value:A})}),Object(_.jsx)("div",{className:"word-edit__input-wrapper ".concat(i?"":"hidden"),children:Object(_.jsx)("input",{className:"word-edit__input",placeholder:"translation",onChange:function(e){q(e.target.value)},value:E})}),Object(_.jsxs)("div",{className:"word-edit__sound",onClick:function(){(g.current||{click:function(){}}).click()},role:"button",children:[Object(_.jsx)("strong",{children:"Sound: "}),I]}),Object(_.jsxs)("div",{className:"add-new-word__img-wrapper",children:[Object(_.jsx)("strong",{children:"Image: "}),Object(_.jsx)("div",{className:"add-new-word__img-container",role:"button",onClick:function(){i&&(m.current||{click:function(){}}).click()},children:Object(_.jsx)("img",{className:"add-new-word__img  ".concat(N?"":"hidden"),src:"".concat(N),alt:"img"})})]})]}),Object(_.jsx)(Ce.a,{className:"add-new-word__plus-icon ".concat(i?"hidden":""),icon:Se.a,onClick:function(){o(!0),f("Create new word?")}}),Object(_.jsxs)("div",{className:"add-new-word__btn-wrapper ".concat(i?"":"hidden"),children:[Object(_.jsx)("button",{className:"category-edit__btn btn-red btn-add",type:"button",onClick:function(){W()},children:"CANCEL"}),Object(_.jsx)("button",{className:"category-edit__btn  btn-green btn-add",type:"button",onClick:function(){if(A)if(E)if(v)if(I){var e={word:A,image:v,translation:E,audioSrc:"audio/".concat(I)};U.append("user",a),Be(U).then((function(){qe(t,e,a).then((function(){_e().then((function(e){n(X(e)),n(P())}))})),K(new FormData),W()}))}else f("Please load sound");else f("Please load image");else f("Please enter translation");else f("Please enter word")},children:"OK"})]}),Object(_.jsx)("div",{className:"add-new-word__msg",children:b})]})},Ge=function(e){var t=e.category,n=p((function(e){return e.app.cards})),c=n[0],a=c.findIndex((function(e){return e.category.replace(/[\s()]/g,"").toLowerCase()===t})),r=n[a+1];return Object(_.jsxs)("div",{className:"edit-words-page",children:[Object(_.jsxs)("div",{className:"edit-category-page__title",children:["Edit words: ",Object(_.jsxs)("b",{children:[" ",c[a].category]})]}),Object(_.jsxs)("div",{className:"cards-field",children:[Object(_.jsx)(Fe,{category:c[a].category}),null===r||void 0===r?void 0:r.map((function(e,t){return Object(_.jsx)(Ee,{word:e.word,translation:e.translation,image:e.image,audioSrc:e.audioSrc},e.word)}))]})]})};var Ue=function(){var e=d(),t=p((function(e){return e.app.cards})),n=p((function(e){return e.app.hostMessage})),r=t[0],s=p((function(e){return e.server.isAdminLoggedIn})),i=Object(c.useState)(!1),o=Object(u.a)(i,2),j=o[0],b=o[1];return function(){var e=p((function(e){return e.app.cards})),t=e[0],n=d(),c=Object(l.h)(),r=Object(l.g)();a.a.useEffect((function(){var a=c.pathname.substring(1);if(n(F(a)),n(J()),n(q()),n(Y()),0!==a.length)if("statistic"!==a)if("login"!==a){if("logout"===a)return n(me()),void r.push("/");if("repeat-words"!==a){var s=I(a,e);n(v(s+1))}else n(v(-1))}else(null===t||void 0===t?void 0:t.length)>0&&n(v(t.length+3));else n(v((null===t||void 0===t?void 0:t.length)+2));else n(v(0))}))}(),j||(Ne().then((function(t){"user_not_found"!==t&&""!==t&&e(fe())})),_e().then((function(t){e(X(t)),e(Z()),b(!0),t.length<1&&e($())})).catch((function(){return e($())}))),Object(_.jsxs)("div",{className:"app",onClick:function(){e(h()),e(g())},onKeyDown:function(){},role:"button",tabIndex:0,children:[Object(_.jsx)("div",{className:"menu-hover-box",onMouseEnter:function(){e(m())}}),Object(_.jsx)(y,{}),s?Object(_.jsx)(ye,{}):"",Object(_.jsx)("h1",{className:"title",children:"English for kids"}),n?Object(_.jsx)("div",{className:"title-hosting",children:"Please restart application after 10-15 seconds. Backend is hosted on free hosting and requires some time to start."}):"",Object(_.jsxs)(l.d,{children:[Object(_.jsx)(l.b,{exact:!0,path:"/",children:Object(_.jsx)(C,{})}),null===r||void 0===r?void 0:r.map((function(e){return Object(_.jsx)(l.b,{exact:!0,path:"/".concat(e.category.replace(/[\s()]/g,"").toLowerCase()),children:Object(_.jsx)(re,{path:e.category.replace(/[\s()]/g,"").toLowerCase()})},e.category)})),s?null===r||void 0===r?void 0:r.map((function(e){return Object(_.jsx)(l.b,{exact:!0,path:"/".concat(e.category.replace(/[\s()]/g,"").toLowerCase(),"/words"),children:Object(_.jsx)(Ge,{category:e.category.replace(/[\s()]/g,"").toLowerCase()})},"".concat(e.category,"words"))})):"",Object(_.jsx)(l.b,{exact:!0,path:"/repeat-words",children:Object(_.jsx)(re,{path:"repeat-words"})}),Object(_.jsx)(l.b,{exact:!0,path:"/statistic",children:Object(_.jsx)(Oe,{})}),Object(_.jsx)(l.b,{exact:!0,path:"/login",children:s?Object(_.jsx)(l.a,{to:"/"}):Object(_.jsx)(xe,{})}),Object(_.jsx)(l.b,{exact:!0,path:"/categories",children:s?Object(_.jsx)(Ae,{}):Object(_.jsx)(l.a,{to:"/"})}),Object(_.jsx)(l.b,{exact:!0,path:"/words",children:s?Object(_.jsx)(l.a,{to:"/categories"}):Object(_.jsx)(l.a,{to:"/"})}),Object(_.jsx)(l.b,{path:"/",children:Object(_.jsx)(l.a,{to:"/"})})]})]})},Ke=Object(j.a)({reducer:{menu:x,app:ee,server:je}});s.a.render(Object(_.jsx)(i.a,{children:Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(o.a,{store:Ke,children:Object(_.jsx)(Ue,{})})})}),document.getElementById("root"))}},[[91,1,2]]]);